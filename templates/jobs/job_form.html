{% extends 'base.html' %}
{% load static %}

{% block title %}
    {% if form.instance.pk %}Edit Job{% else %}Create Job{% endif %} - Job Portal
{% endblock %}

{% block content %}
<div class="job-form-container">
    <h1>
        {% if form.instance.pk %}
            Edit Job: {{ form.instance.title }}
        {% else %}
            Create New Job
        {% endif %}
    </h1>

    <form method="post" class="job-form">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.title.id_for_label }}">Job Title *</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="{{ form.category.id_for_label }}">Category</label>
                {{ form.category }}
                {% if form.category.errors %}
                    <div class="error">{{ form.category.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.job_type.id_for_label }}">Job Type *</label>
                {{ form.job_type }}
                {% if form.job_type.errors %}
                    <div class="error">{{ form.job_type.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="{{ form.location.id_for_label }}">Location *</label>
                {{ form.location }}
                {% if form.location.errors %}
                    <div class="error">{{ form.location.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.experience_required.id_for_label }}">Experience Required</label>
                {{ form.experience_required }}
                {% if form.experience_required.errors %}
                    <div class="error">{{ form.experience_required.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.description.id_for_label }}">Job Description *</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="error">{{ form.description.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.requirements.id_for_label }}">Requirements *</label>
            {{ form.requirements }}
            {% if form.requirements.errors %}
                <div class="error">{{ form.requirements.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.skills_required.id_for_label }}">Skills Required</label>
            {{ form.skills_required }}
            {% if form.skills_required.errors %}
                <div class="error">{{ form.skills_required.errors }}</div>
            {% endif %}
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="{{ form.salary_min.id_for_label }}">Minimum Salary</label>
                {{ form.salary_min }}
                {% if form.salary_min.errors %}
                    <div class="error">{{ form.salary_min.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.salary_max.id_for_label }}">Maximum Salary</label>
                {{ form.salary_max }}
                {% if form.salary_max.errors %}
                    <div class="error">{{ form.salary_max.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.deadline.id_for_label }}">Application Deadline</label>
            {{ form.deadline }}
            {% if form.deadline.errors %}
                <div class="error">{{ form.deadline.errors }}</div>
            {% endif %}
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}Update Job{% else %}Create Job{% endif %}
            </button>
            <a href="{% if form.instance.pk %}{% url 'job-detail' form.instance.pk %}{% else %}{% url 'job-list' %}{% endif %}" 
               class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

{% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
